<!-- <nz-timeline nzMode="alternate" *ngIf="false">
    <nz-timeline-item>Create a services site 2015-09-01</nz-timeline-item>
    <nz-timeline-item nzColor="red">
        <nz-list [nzDataSource]="data" nzBordered nzSize="small" [nzHeader]="'Rejections'" [nzRenderItem]="item"
            class="text-left">
            <ng-template #item let-item>
                <nz-list-item [nzContent]="item"><span class="mr-2"><i nz-icon nzType="close-circle"
                            [nzTheme]="'twotone'" nzTwotoneColor="#f5222d"></i></span></nz-list-item>
            </ng-template>
        </nz-list>
    </nz-timeline-item>
    <nz-timeline-item>Create a services site 2015-09-01</nz-timeline-item>
    <nz-timeline-item [nzDot]="dotTemplate"><button nz-button nzType="primary">Add Rejections</button>
    </nz-timeline-item>
</nz-timeline>
<ng-template #dotTemplate>
    <i nz-icon type="clock-circle-o" style="font-size: 16px;"></i>
</ng-template> -->
<nz-card class="titleCard" *ngIf="HolderDetails.FirstHoldertitle">
        <!-- <marquee behavior="scroll" direction="left" onmouseover="this.stop();" onmouseout="this.start();"> -->
<span class="mr-3"><b>Name &nbsp;:&nbsp;{{HolderDetails.FirstHoldertitle}} {{HolderDetails.FirstHolderfirstName}} {{HolderDetails.FirstHoldermiddleName}} {{HolderDetails.FirstHolderlastName}} &nbsp;,</b></span>
<span class="mr-3"><b>Pan &nbsp;: &nbsp;{{HolderDetails.FirstHolderpanNumber}}&nbsp;,</b></span>
<span ><b>Serial Number &nbsp;: &nbsp;{{clientSerialNumber}}</b></span>
<!-- </marquee> -->
</nz-card>
<br>
<div *ngIf="ho">
    <div *ngIf="isEntryMadeUser">
    <nz-card nzTitle="" style="padding:20px">
    <nz-table #basicDPDetailsTable [nzData]="checkedData" [nzSize]="'small'" [nzShowPagination]="false"
                [nzFrontPagination]="false" *ngIf="checkedData.length" class="tranTbl">
                <thead>
                    <tr style="background: #32aa8d">
                        <th>Serial Number</th>
                        <th>Maker Emp.Code</th>
                        <th>Maker Dt & Time</th>
                        <th>Checker Emp.Code</th>
                        <th>Checker Dt & Time</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let data of basicDPDetailsTable.data">
                        <td >{{data.ClientSerialNo}}</td>
                        <td>{{data.MakerEmployeeCode}}</td>
                        <td>{{data.MakerDateTime}}</td>
                        <td>{{data.CheckerEmployeeCode}}</td>
                        <td>{{data.CheckerDateTime}}</td>

                    </tr>
                </tbody>
            </nz-table>
            <button *ngIf="!isFinalise" nzType="primary" nz-button n class="float-right m-2" (click)="final()">Finalise</button>
  </nz-card>
    </div>
  <div *ngIf="isEntryMadeUser==false && !isFinalise">
    <form nz-form nzLayout="vertical">
        <div nz-row nzGutter="5">
            <div nz-col nzMd="4">
                <nz-form-item>
                    <nz-form-label>Rejection Remarks
                    </nz-form-label>
                    <nz-form-control>
                        <nz-select [(ngModel)]="rejectionType" (ngModelChange)="getReasons($event)" name="rej">
                            <nz-option *ngFor="let data of rejTypeData" [nzValue]="data.Field" [nzLabel]="data.Field">
                            </nz-option>
                        </nz-select>
                    </nz-form-control>
                </nz-form-item>

            </div>
          
            <div nz-col nzMd="10">
                <nz-form-item>
                    <nz-form-label>Easy find
                    </nz-form-label>
                    <nz-form-control>
                       <input nz-input [(ngModel)]="searchValue"  (ngModelChange)="findReasons($event)" name="findreasons">
                    </nz-form-control>
                </nz-form-item>

            </div>

        </div>
        <div nz-row nzGutter="5">
        <div nz-col nzMd="12" *ngIf="!searchWithSelection">
            <div *ngIf="resultArray.length">
                    <nz-card [nzTitle]="titleTemplate11">
                            <ng-template #titleTemplate11>
                                <div>Reasons</div>
                            </ng-template>
                            <nz-table #datatable [nzScroll]="{y:'490px'}" [nzSize]="'small'" [nzShowPagination]="false"
                                [nzFrontPagination]="false" [nzData]="resultArray" class="tranTbl">

                                <tbody>
                                    <tr *ngFor="let data of datatable.data;let i=index">
                                        <td><label nz-checkbox [(ngModel)]="data.checked" (ngModelChange)="checkChecked()"
                                                [name]="'checkbox'+i">{{ data.Description }}</label></td>
            
                                    </tr>
                                </tbody>
                            </nz-table>
                        </nz-card>

            </div>
        </div>
        <div nz-col nzMd="12" *ngIf="reasonsArray.length && searchWithSelection">
            <nz-card [nzTitle]="titleTemplate">
                <ng-template #titleTemplate>
                    <div>Reasons</div>
                </ng-template>
                <nz-table #borderedTable [nzScroll]="{y:'490px'}" [nzSize]="'small'" [nzShowPagination]="false"
                    [nzFrontPagination]="false" [nzData]="reasonsArray" class="tranTbl">
                    <tbody>
                        <tr *ngFor="let data of borderedTable.data;let i=index">
                            <td><label nz-checkbox [(ngModel)]="data.checked" (ngModelChange)="checkChecked()"
                                    [name]="'checkbox'+i">{{ data.Description }}</label></td>

                        </tr>
                    </tbody>
                </nz-table>
            </nz-card>
        </div>

                <div nz-col nzMd="12" *ngIf="showcheckedGrid">
                        <nz-card [nzTitle]="titleTemplate111">
                                <ng-template #titleTemplate111>
                                    <div>Checked Reasons</div>
                                </ng-template>
                                <div  style="max-height:490px;overflow-y:scroll;">
                               <div *ngFor="let items of totalData" >
                                    <div *ngFor="let data of items;let i=index">
                                            <div class="checkedTds" *ngIf="data.Description && data.checked"><label nz-checkbox [(ngModel)]="data.checked" (ngModelChange)="checkChecked()"
                                                    [name]="'checkbox'+i+'ss'">{{ data.Description }}</label></div>
                                        </div>
                               </div>
                                </div>
                            </nz-card>
    
                </div>
        </div>


    </form>
<br>
<div nz-row>
    <div nz-col nzMd="24">
            <div>
                    <nz-form-item>
                      <nz-form-label>Additional Rejection</nz-form-label>
                      <nz-form-control>
                        <textarea nz-input [(ngModel)]="AdditionalRejection" name="addRej" rows="4" style="max-height: 100px;"  maxlength="300" ></textarea>
                      </nz-form-control>
                    </nz-form-item>
                  </div>
    </div>
    <div nz-col nzMd="24" style="padding:20px">
            <button *ngIf="showcheckedGrid" nz-button style="background: #f88c00  ;color:white;" class="float-right" (click)="save()">Reject</button>
            <button *ngIf="showKra" nz-button nzType="primary"  [nzLoading]="isLoadingKRADetails" class="float-right" (click)="test()">Update KRA</button>
            <button *ngIf="!showcheckedGrid" nzType="primary" nz-button n class="float-right" (click)="approve()">Approve</button>
    </div>
</div>
   </div>
</div>

<div *ngIf="!ho">
    <nz-card [nzTitle]="titleTemplate1">
        <ng-template #titleTemplate1>
            <div>BRANCH</div>
        </ng-template>
        <div style="padding:5px;">
            <nz-table #basicDPDetailsTable [nzData]="checkedData" [nzSize]="'small'" [nzShowPagination]="false"
                [nzFrontPagination]="false" *ngIf="checkedData.length" class="tranTbl">
                <thead>
                    <tr style="background:#32aa8d">
                        <th>Serial Number</th>
                        <th>Maker Emp.Code</th>
                        <th>Maker Dt & Time</th>
                        <th>Checker Emp.Code</th>
                        <th>Checker Dt & Time</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let data of basicDPDetailsTable.data">
                        <td >{{data.ClientSerialNo}}</td>
                        <td>{{data.MakerEmployeeCode}}</td>
                        <td>{{data.MakerDateTime}}</td>
                        <td>{{data.CheckerEmployeeCode}}</td>
                        <td>{{data.CheckerDateTime}}</td>

                    </tr>
                </tbody>
            </nz-table>
            <br>
            <!-- <nz-table *ngIf="ReasonToRejectData.length" #borderedTable11 [nzScroll]="{y:'490px'}" [nzSize]="'small'"
                [nzShowPagination]="false" [nzFrontPagination]="false" [nzData]="ReasonToRejectData" class="tranTbl">
                <thead>
                    <tr style="background: rgba(137, 238, 204, 0.746);;">
                        <th class="pl-3" width="20%">Type</th>
                        <th width="80%">Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let data of borderedTable11.data;let i=index">
                        <td>{{data.Type}}</td>
                        <td>{{data.Description}}</td>
                    </tr>
                </tbody>
            </nz-table> -->
        </div>
        <button *ngIf="isEntryMadeUser==false && !isFinalise" nzType="primary" nz-button n class="float-right m-2" (click)="final()">Finalise</button>

    </nz-card>

</div>
<app-loader *ngIf="spin"></app-loader>